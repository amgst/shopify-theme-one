<section class="py-16 lg:py-20">
  <div class="container mx-auto px-4">
    {%- if section.settings.title != blank -%}
      <div class="text-center mb-12 lg:mb-16">
        <h2 class="text-3xl lg:text-4xl xl:text-5xl font-light tracking-tight mb-4">
          {{ section.settings.title }}
        </h2>
        {%- if section.settings.description != blank -%}
          <div class="text-lg text-gray-600 max-w-3xl mx-auto">
            {{ section.settings.description }}
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-12">
      {%- for block in section.blocks -%}
        <div class="text-center p-6 lg:p-8 rounded-2xl transition-all duration-300 hover:-translate-y-1 hover:shadow-xl" {{ block.shopify_attributes }}>
          {%- if block.settings.icon != blank -%}
            <div class="flex items-center justify-center w-20 h-20 mx-auto mb-6 bg-gray-100 rounded-full transition-all duration-300 hover:scale-110 hover:bg-gray-200">
              <img
                src="{{ block.settings.icon | image_url: width: 80 }}"
                alt="{{ block.settings.icon.alt | escape }}"
                loading="lazy"
                width="40"
                height="40"
                class="w-10 h-10 object-contain"
              >
            </div>
          {%- elsif block.settings.icon_name != blank -%}
            <div class="flex items-center justify-center w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full transition-all duration-300 hover:scale-110 hover:from-purple-600 hover:to-blue-500">
              {%- case block.settings.icon_name -%}
                {%- when 'shipping' -%}
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                  </svg>
                {%- when 'returns' -%}
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M9 7h6l-3-3-3 3zm3 13c-4.97 0-9-4.03-9-9s4.03-9 9-9c2.12 0 4.07.74 5.62 1.97L19 2.59 20.41 4l-1.38 1.38C20.26 7.93 21 9.88 21 12c0 4.97-4.03 9-9 9zm0-16c-3.86 0-7 3.14-7 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z"/>
                  </svg>
                {%- when 'support' -%}
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                  </svg>
                {%- when 'secure' -%}
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/>
                  </svg>
                {%- when 'quality' -%}
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                  </svg>
                {%- when 'eco' -%}
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8z"/>
                  </svg>
                {%- else -%}
                  <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                  </svg>
              {%- endcase -%}
            </div>
          {%- endif -%}
          
          <div class="max-w-xs mx-auto">
            {%- if block.settings.title != blank -%}
              <h3 class="text-xl font-semibold mb-3 text-gray-900">
                {{ block.settings.title }}
              </h3>
            {%- endif -%}
            {%- if block.settings.description != blank -%}
              <p class="text-sm leading-relaxed text-gray-600">
                {{ block.settings.description }}
              </p>
            {%- endif -%}
          </div>
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "WB Features Grid",
  "tag": "section",
  "class": "wb-features-grid",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Why Choose Us"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>We're committed to providing exceptional service and quality products</p>"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "select",
          "id": "icon_name",
          "label": "Icon",
          "options": [
            {
              "value": "shipping",
              "label": "Free Shipping"
            },
            {
              "value": "returns",
              "label": "Easy Returns"
            },
            {
              "value": "support",
              "label": "24/7 Support"
            },
            {
              "value": "secure",
              "label": "Secure Payment"
            },
            {
              "value": "quality",
              "label": "Premium Quality"
            },
            {
              "value": "eco",
              "label": "Eco Friendly"
            }
          ],
          "default": "shipping"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Custom Icon Image",
          "info": "Optional: Upload a custom icon (overrides the selected icon above)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Feature Title",
          "default": "Free Shipping"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Free shipping on all orders over $50. Fast and reliable delivery to your doorstep."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "WB Features Grid",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "icon_name": "shipping",
            "title": "Free Shipping",
            "description": "Free shipping on all orders over $50. Fast and reliable delivery to your doorstep."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon_name": "returns",
            "title": "Easy Returns",
            "description": "30-day return policy. If you're not satisfied, return it for a full refund."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon_name": "support",
            "title": "24/7 Support",
            "description": "Our customer service team is available around the clock to help you."
          }
        }
      ]
    }
  ]
}
{% endschema %}
